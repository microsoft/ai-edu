
## 4.5 故事分析

### 4.5.1 软件形式的变化

在 4.4 节中我们看到，即使是在微软，也会有多种形式的团队流程。原因多种多样：

- 团队是否专业？
- 需求是否合理？是否复杂？
- 团队成员分布情况
- 项目规模
- 项目所处的阶段
- 项目的发起者、引领者是谁



- 软件形式的变化


<img src="Images/Slide10.JPG"/>

- 50 年前，软件系统是为了解决大型企业的应用场景的刚性需求，比如航空系统、金融股票系统、操作系统，可以用微软的 Windows 操作系统作为代表，结构复杂，投入巨大，开发周期长，维护时间也长。这些系统不是所有软件公司都能做的，所以才出现了微软、IBM、Oracle等这些大型软件厂商。

- 30 年前，需求场景下移到了中小企业的应用上，比如办公软件、企业管理软件，还有面向大众的游戏软件。这类软件需求多样，需要定制，一般的中型软件公司经过一定的积累后也可以完成。可以用微软的 Office 这类运行在 PC 上的办公套件作为代表。

- 10年前，随着互联网的全面普及以及智能手机的发展，需求场景进一步下沉到了个人用户上，成百上千的网站、手机应用，以及其它 IoT 设备（如GPS,智能手表,智能手环,智能监控）上的移动应用出现在应用市场上。

这种软件体量和形式上的变化，必然会导致软件开发团队的理念和流程的变化。


### 4.5.2 四个项目的对比分析

在 4.4 节中的四个项目

<img src="Images/Slide11.JPG"/>

#### 项目 A - 多智能体强化学习平台

闭门造车，画饼充饥。

从需求上看：

这是存在于微软的研究员群体的一个通病。在完成了一个研究项目并有了实际的成果转换后，大家都想复制这种成功，于是想把“项目”变成“产品”，把“产品”变成“平台”，把“平台”变成“服务”。这种试图“泛化”的努力是违背了软件项目的基本规律的：还没有找到规律，就想建立模型。

基于统计的机器学习，和基于特征的深度学习，都已经被广泛地接受并落地于实际应用场景中。虽然强化学习的应用范围也很广，但是这方面的领域专家太少了。一方面，我们的研究员没有领域知识，不知道强化学习应该用在哪里；另一方面，有领域知识的人没有强化学习知识，而是寻求传统的求解思路，或者把目光转向机器学习和深度学习技术上，强化学习的入门门槛很高。所以，很多人对强化学习的了解还仅限于 Alpha Go 上。

从团队流程上看：

- 没有实际需求却放很多资源在上面，就是一种浪费。
- Tech lead 没有 design doc，不写 code，只做 code review，这是不对的。
- 实际上是由研究员指定的软件开发相关的工作内容，在软件工程上是一个笑话：如果研究员都能做软件工程的话，那还要我们这帮工程师干什么？
- 其实最关键的还是团队的老板，看不清这个项目的未来发展，即不懂技术又不懂管理，被人家画了个饼，却始终吃不到嘴里。

这个项目的先天缺陷太多，流程上也有问题。但即使流程再正确，也不能使得这个项目成功。

#### 项目 B - Torch Nebula

“无中生有”，雪中送炭。

“无中生有”，笔者用了引号，实际上是一个褒义词，即开发团队敏锐地捕捉到了用户自己说不出来的需求。就好比 Windows 10 的人脸识别登录功能，用户并没有要求，但是具备此功能后用户很高兴。

从团队流程上看：

- 每天的例会是很必要的。
- 每两三周作为一个 Sprint 是正确的。
- Tech lead 和 Scrum master 是同一个人，这是不正确的做法，导致每天的 Scrum meeting 太长。。
- 在项目早期建设了 CI Pipeline 是正确的，但是没有及时建立有效的 Unit Test 机制是不正确的，导致新代码 merge 到主分支的风险很大。
- 实现每个功能前都需要一个简单的设计文档及评审，这是正确的。
- 每周向上级老板汇报一次未尝不可，但是如果能和 Sprint 周期同步就会更好。

所以，这是一个比较成功的团队流程。

#### 项目 C - 量化交易

婆婆妈妈，盘根错节。扭曲

从需求上看：

需求肯定有，但是这种项目有个致命的问题：不能推广。比如，客户 A 已经使用了我们的量化交易系统，我们又找到了客户 B，人家会问：有别的客户使用你们的系统吗？如果你说“还没有”，那客户 B 会觉得不放心；如果你说“已经有了”，那客户 B 会质疑：如果我们也使用，那么和客户 A 的算法就是完全一致的，在股票市场上就会造成严重的买卖同质性。

从团队流程上看：

- 每周两次的内部 sync 是必要的，这是项目流程的基本需要。
- 每周一次的和客户交流也是未尝不可的，但是没必要这么频繁。
- 每两周一次的内部交流，纯属是工程师对研究员的单方向汇报，笔者认为跑偏了，相当于工程师是研究员的下属，而不是合作关系。如果是双方互相交流的话，那就是另外一番场景了。
- 从与客户的关系看，由于以前研究员们对客户过于“卑躬屈膝”了，真的把客户当成“上帝”了，搞得 PM 根本拦不住也不敢拦客户的随机要求。

所以，这个项目虽然从流程上看是大体合格的，并且最后是成功的，但是不该牵涉到的东西太多，木头感觉很累。

#### 项目 D - ONNX Converter

按部就班，稳步前进。

从需求上看：

这个需求也是需要一种战略性的眼光才能发现的，弥补了微软在 AI Framework 方面的缺憾。

从团队流程上看：

- 半年一次方向性调整是对的。
- 每周一次的 sync 频率也是对的。

- 团队分布

这种体量和性质的项目，不能像项目 B 那样频繁操作，所以团队流程是正确的。



### 什么样的项目可以使用敏捷开发

那么，是不是大型软件就不能使用敏捷开发的思想呢？

以必应搜索服务为例，

- 从 Live Search 改名为 Bing 后，发布周期是 6 个月；
- 两年后，缩减到 3 个月整体发布一次；
- 再过两年，缩短到 1 个月整体发布一次；
- 质的变化发生在 2013 年，不再整体发布了，而是每个 feature team 可以自主发布，最短周期可以是星期。
- 又经过两年后，随着系统的成熟，完全取消了发布限制，每个 feature team 可以随时发布新功能。


