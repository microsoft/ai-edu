
## 4.8 练习 - 代码管理与流程管理工具

### 4.8.1 团队开发流程代码工具

- Remote：远程仓库，就是类似github，码云等网站所提供的仓库，可以理解为远程数据交换的仓库~

- Repository：本地仓库，你执行git clone 地址，就是把远程仓库克隆到本地仓库。它是一个存放在本地的版本库，其中HEAD指向最新放入仓库的版本。当你执行git commit，文件改动就到本地仓库来了~

- Index/Stage：暂存区，一般存放在 .git目录下，即.git/index,它又叫待提交更新区，用于临时存放你未提交的改动。比如，你执行git add，这些改动就添加到这个区域啦。

- Workspace：你电脑本地看到的文件和目录，在Git的版本控制下，构成了工作区。

<img src="Images/Slide24.JPG"/>

图 4.8.1 Git 工作流

对于涉及编写代码的每个服务、库或其他功能，工程知识团队的软件开发过程应按如下方式设置：


1. 开发人员将源代码从远程存储库签出到本地存储库；
2. 创建一个新分支；
3. 开发：编写、运行和调试您的代码和配置更改；
4. 如果在开发期间，有团队内别的开发者提交了代码，开发人员需要从远程更新代码，避免奖励的冲突；
5. 提交代码并将其推送到远程存储库；
6. 创建一个 PR（Pull Request，拉取请求）以将分支合并到目标分支中；
7. 拉取请求由多个审阅者审阅，可以设置为至少有一个审阅者批准后方可；
8. 自动构建和测试管道（CI Pipeline）将验证该分支；
9. 如果测试通过，木头可以合并分支到主分支，完成拉取请求。

明明是要把修改的代码合并入主分支（Push），为什么叫拉取请求呢（Pull）？这是相对于主分支说的，是在请求主分支把修改拉进去。


1. 程序员的每一次推送，都可以触发 CI Pipeline 的运行，便于在提交 PR 之前发现一些基本的错误。
2. 如果代码审查者提出意见，程序员需要在本地修改代码并解决意见，再次提交到远程，在上次的 PR 内再次请大家审查代码，直到通过为止。


### 4.8.2 团队开发流程管理工具

在微软一般使用 Azure DevOps 来做开发流程管理工具，只需要用浏览器访问，所有服务都部署在云端。利用这个工具，开发团队可以方便地把本章中所学到的关于开发流程的知识应用到实践中。

主要步骤如下：

#### 1. 选择流程类型

<img src="Images/Slide25.JPG"/>

图 4.8.2 项目流程类型与主菜单

一共有四种类型可选：敏捷流程、基本流程、Scrum 流程、CMMI 流程。如果选择“敏捷流程”，则 Backlog 中的层次关系将如图 4.8.2 的左子图所示，具体的例子如中子图所示，而右子图展示了 Azure DevOps 的左边栏的主菜单，我们只关心 Boards 下面的 Work items, Boards, Backlogs, Sprints。

#### 2. Backlogs - 创建产品计划

<img src="Images/Slide26.JPG"/>

图 4.8.3 待办事项 Backlogs

在 Backlogs 里面，都可以添加以下四种类型的工作项：

- 史诗 Epic
- 特性 Feature
- 用户故事 User Story
- 代码缺陷 Bug

这与图 4.8.2 中左子图的层次关系是对应的。

首先创建 Epic，但是在一个比较小的项目中，也可以没有 Epic，因为整个项目都只为一个 Epic 服务。

其次，创建特性 Feature，有些资料中也称之为功能。特性一般对应系统中的一个子系统。

然后在特性下面创建用户故事 User Story，就是常说的 Scenario（用户场景）。

#### 3. Boards - 添加具体工作内容并管理

<img src="Images/Slide27.JPG"/>

图 4.8.4 工作版内容管理 Boards

Backlogs 和 Boards 是可以相互切换显示的，内容一致，只是显示方式不同。Boards 的显示方式如图 4.8.4 所示。

切换到 Stories 列表（相当于最底层的工作项），就可以为每个 User Story 添加具体的任务（Task）、缺陷（Bug）、测试（Test），然后就可以给每个 Task、Bug、Test 分配 owner 了。在 User Story 及以上级别的项中，一般不分配 owner。

Board 中有四列分栏，分别是 New、Active、Resolved、Closed，状态变化后用鼠标把工作项拖到相应的列即可。

#### 4. Sprints - 制定冲刺计划

<img src="Images/Slide28.JPG"/>

图 4.8.5 冲刺计划 Sprints

在添加好具体工作内容后，点击 Sprints，就可以开始制定冲刺计划了。最开始时没有任何记录，点击【+New Sprint】按钮添加新计划，然后把工作项赋给每个 Sprint。


#### 5. Dashboards - 仪表板

<img src="Images/Slide29.JPG"/>

图 4.8.6 仪表板 Dashboards

燃尽图。
