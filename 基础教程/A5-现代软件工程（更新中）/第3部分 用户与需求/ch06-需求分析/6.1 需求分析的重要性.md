# 6.1 需求分析的重要性

需求分析是软件生命周期中相当重要的一个阶段。

<div align="center">
<img src="Images/Slide3.JPG"/>

图 6.1.1 - IT 项目成功率调查
</div>


1999年，美国专门从事跟踪 IT 项目成功或失败的权威机构 Standish Group，对23000个项目进行的研究结果表明，28%的项目彻底失败，46%的项目超出经费预算或者超出工期，只有约26%的项目获得成功。

而在这些高达74%（28% + 46%）的不算成功项目中，有约60%的失败是源于需求问题，也就是差不多有一半的项目都遇到了这个问题，这一可怕的现象引起人们对需求分析的高度重视。

需求分析阶段的主要任务是通过需求分析人员与用户之间的广泛交流，不断澄清一些模糊的概念，最终形成一个完整的、清晰的、一致的需求说明。

## 6.1.1 国外故事：秋千图的例子

我们先请出软件业界著名的秋千图，如图 6.1.2，表 6.1.1 中有解释。

<div align="center">
<img src="Images/Slide4.JPG"/>

图 6.1.2 - 秋千图
</div>

表 6.1.1 - 秋千图的解释

|序号|标题|解读|
|--|--|--|
|1|客户的描述|挂在树上供三个孩子一起玩耍的秋千|
|2|项目经理的理解|两根绳子拴在树上，挂一个木板|
|3|分析员的设计|修改支撑系统的结构以便让秋千能晃动|
|4|程序员的实现|实现了静态拓扑结构设计：绳、树、木板|
|5|商业顾问的描述|舒适无比、光芒四射|
|6|项目文档|空空如也，如云如烟|
|7|上线的产品|缺东少西，不知所云|
|8|客户投资|巨大得可以修建一个游乐场了|
|9|技术支持|少之又少，无依无靠|
|10|用户的真实需求|树杈+绳子+轮胎，可以供该客户的三个孩子玩耍|

需求调研与分析是一切软件的起源，差之毫厘，谬之千里。在秋千图的例子中，各个环节的误差导致了彻底的失败。

1. 首先，客户的描述是“我的三个孩子可以一起玩耍”，根据客户的描述，这个秋千必须可以同时容纳三人。显然这个描述是不准确的：“一起”的含义并不是三个孩子同时在秋千上，有可能是一个孩子在秋千上，两个孩子在地上推秋千。

2. 项目经理没见过三层的秋千，但是他觉得只要秋千的踏板足够宽，可以站好几个孩子。另外，如果想保证安全的话，两根绳子最好能拴在两个树杈上，这样可以分担承重。

3. 分析师认为分担承重的需求很重要，但是如果秋千需要前后晃动，必须有空间，那就不得不把树锯开。当然左右各加一个支撑是必须的，这样系统可以保持稳定。

4. 程序员的实现完全符合秋千的静态拓扑结构：两根绳子拴住树干上，下面挂一个踏板。至于秋千的动态模型可以后期再考虑。
 
5. 产品快成型了，市场人员坐不住了，开始到处宣传：我们的产品非常的安全和舒适，孩子们就好像是坐在沙发里一样，家长不必有任何担心。
 
6. 没有人写文档，需求、设计口口相传，导致各个环节都出现误差。

7. 工程人员自己家里也有简易秋千，一根绳子就可以搞定。所以在安装产品时忘记带踏板了，那就索性只挂一个绳索，这样孩子们依旧可以愉快地攀爬。

8. 客户抱怨，为此项目一再增加投入，最后发现累计投入可以建造一座游乐场了。

9.  后期的技术支持认为：客户的抱怨是有道理的，我们应该把树砍掉，让客户建造游乐场。

10. 其实客户的真实需求只是一根绳索下面挂一个旧轮胎。

## 6.1.2 国产故事：烟囱和井的例子

<div align="center">
<img src="Images/Slide5.JPG"/>

图 6.1.3 - 烟囱和深井
</div>


在郭德纲的相声《梦中婚》里，客户郭师傅需要挖一口井，但是工程人员把图纸拿反了，最后建了一个烟囱，一边干一边还纳闷儿：这个烟囱为什么设计的这么粗？

其实，有很多机会可以避免这个错误，而且可以轻易觉察。但是如果对应到软件开发上，就没有那么容易了，这要求在软件开发中有严格的流程管理和及时（通过scrum meeting）沟通。

<div align="center">
<img src="Images/Slide6.JPG"/>

图 6.1.4 - Scrum 的沟通作用
</div>


1. 包工头作为中间环节没有给上下游交代清楚。包工头在这里可以对应到需求分析人员，他如果拿着图纸（需求规格说明书）和客户确认一下需求，或者直接告诉施工方（开发人员）客户是要挖一口井，也不会出现这样的错误。

2. 文档不严格，不完整。如果在图的上方注明《郭师傅家的深井挖建工程图》，除非工人是文盲，否则也不会拿反图纸。

3. 施工人员拿到图纸后，针对对图中的疑点，及时和包工头沟通。开发人员看到需求规格说明书后，可能有他自己的理解（和秋千图的例子一样），针对任何疑点，都要及时与需求分析人员沟通。

4. 施工人员及时与客户现场沟通。在软件开发中，客户通常是看不到软件的样子的，这和烟囱的例子不可类比。所以，更要求开发人员及时做好产品原型（prototype）交给需求分析人员（包工头）和客户（郭师傅）进行确认。

5. 包工头经常来现场检查工程进展。需求分析人员在完成文档后，并非就完成工作了，而是要阶段性地和开发人员进行交流，监督、检查进度、质量以及需求满足情况。

## 6.1.3 需求分析的特点及难点

需求分析的特点及难点，主要体现在图 6.1.5 所示的几个方面。$^{[1]}$

<div align="center">
<img src="Images/Slide7.JPG"/>

图 6.1.5 - 需求分析的特点与难点
</div>


1. 定位困难
   
   主要原因一是应用领域的复杂性及业务变化，难以具体确定；二是用户需求所涉及的多因素引起的，比如运行环境和系统功能、性能、可靠性和接口等。

2. 需求常变
   
   软件的需求在整个软件生存周期，常会随着时间和业务而有所变化，如客户环境和业务流程的改变，市场趋势的变化等，也会随着分析、设计和实现而不断深入完善，可能在最后重新修订软件需求。

3. 交流困难
   
   需求分析涉及的人事物及相关因素多，与用户、业务专家、需求工程师和项目管理员等进行交流时，不同的背景知识、角色和角度等，使交流共识较难。
   
4. 认知矛盾
   
   由于不同人员对系统的要求认识不尽相同，所以对问题的表述不够准确，各方面的需求还可能存在着矛盾。难以消除矛盾，形成完备和一致的定义。

