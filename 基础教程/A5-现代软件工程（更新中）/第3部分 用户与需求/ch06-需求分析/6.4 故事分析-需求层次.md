# 6.4 故事分析-需求层次

从需求讲述人来看，不同人所处的位置不同，从而给出不同层次的需求，按照业界惯例，我们一般定义三个层次，如图 6.4.1 所示，即：

- 业务需求
- 用户需求
- 功能需求

<div align="center">
<img src="Images/Slide14.JPG"/>

图 6.4.1 - 需求层次分析
</div>

下面的故事虽然是面向学校教育系统软件的需求分析，而面向企业的软件需求层次也是大同小异，同样可以分为三个层次。但是面向大众的软件，比如我们常用的办公软件、手机软件，就不符合这三个层次特征，我们将在第七章讲述。

## 6.4.1 业务需求（Business Requirement）

我们先来看看校长和教务处主任的需求。

- 校长主要是讲政策方面的内容，以及国家对学校、企业的期望，是一个宏观的大需求；
- 教务处主任从教材入手，反映了目前高校存在的 AI 教育的普遍问题，即难度大，学生不易听懂。所以，主任的需求很简明扼要：提供一门让学生能够听懂的AI课程。

我们把这种需求叫做业务需求（因为需求来自业务管理者）。

<div align="center">
<img src="Images/Slide15.JPG"/>

图 6.4.2 - 第一层次：业务需求
</div>

- 来源：投资人、负责人、管理者等，非直接用户。
- 内容：说明需求的背景原因、系统目标、战略理念。
- 作用：指导系统构建的根本基础。
- 输出：通过对这一层次需求的调研，应该画出“上下文图”作为输出。

表示组织或客户高层次的目标。业务需求通常来自项目投资人、购买产品的客户、实际用户的管理者、市场营销部门或产品策划部门。业务需求描述了组织为什么要开发一个系统，即组织希望达到的目标。

业务需求一般是使用前景和范围（vision and scope）文档来记录业务需求，这份文档有时也被称作项目轮廓图或市场需求（project charter 或 market requirement）文档，但是这类文档超出了本书的讨论范围。$^{[2]}$

也有一些观点认为这一层叫做目标需求，下一层叫做业务需求$^{[3]}$。还有另外一种分类方法，把校长的宏观需求称作“组织级需求”，把教务处主任的需求称作“业务需求”。我们在这里按照大多数文献的命名方式，以便读者可以方便地相互对照。


## 6.4.2 用户需求（User Requirement）

我们再来看看老师们和机房主任的需求。

- 老师们对教材、时间、讲课方法等都有自己的一些看法，因为 AI 相关课程的难度是一些传统课程不能比拟的，实际上也是变相地表达了对 AI 教育系统的期望（需求）；
- 机房主任关心的机房软硬件设备对系统的支持，是否需要升级、如何维护等等问题；
- 学生们对上课的体验、作业的体验有自己的要求。

我们把这种需求叫做用户需求（因为需求来自直接用户）。

<div align="center">
<img src="Images/Slide16.JPG"/>

图 6.4.3 - 第二层次：用户需求
</div>

它描述的是用户的目标，或用户要求系统必须能完成的任务。用例、场景描述、事件/响应表都是表达用户需求的有效途径。也就是说用户需求描述了用户能使用系统来做些什么。

- 来源：系统的实际操作、使用者。
- 内容：从岗位自身的实际工作内容出发，讲述系统可以完成什么任务。
- 作用：指导系统设计、产品规划、功能优化。
- 输出：通过对这一层次需求的理解，应该画出“用例图”和“用例说明”作为输出。

## 6.4.3 功能需求（Functional/Behavior Requirement）

第三层次的需求，有些直接来自用户，更多的来自需求分析人员的需求分析结果。

<div align="center">
<img src="Images/Slide17.JPG"/>

图 6.4.4 - 第三层次：功能需求
</div>

这些需求分析人员被称为系统分析员，在微软没有为这个角色专门设立岗位，而是由资深的开发人员担任。系统分析员一般被要求在领域和技术两个方面都有较深的理解，才能够架起从需求到设计的桥梁。需求分析的结果就是《需求规格说明书》。

功能需求描述开发人员需要实现什么，习惯上总是用“应该”对其进行描述：“系统应该发送电子邮件来通知用户已接受其预定”，有时也被称作行为需求（behavioral requirement）。用户利用这些功能来完成任务，满足业务需求。

- 来源：业务管理者、系统使用者、需求分析结果。
- 内容：描述系统提供的功能或功能组，以及对每个功能的具体描述。
- 作用：指导系统后续的设计和开发，是需求分析的完成标志。
- 输出：通过对这一层次需求的分析，应该输出《需求规格说明书》，还有其它一些重要的图和模型，将会在下几节中详细说明。


## 6.4.4 需求来源

从上面的故事中，虽然所有的“需求”都是从客户的语言文字描述中得到的，但其实是有背后的领域知识的。更进一步地，我们可以挖掘整理出真正的需求来源，如图 6.4.5 所示。

<div align="center">
<img src="Images/Slide18.JPG"/>

图 6.4.5 - 需求的来源
</div>

- 市场需求：最终用户、客户、产品人员
- 监管需求：政府、行业、企业
- 技术需求：软件开发团队、合作团队
- 质量需求：性能、可靠性、安全性等等

有了需求来源的明确定义，才能够有挖掘的基础和引导的目标。其中：
- 监管需求是自上而下的，软件产品要服从；
- 技术需求是有章可循的，软件产品只有服从；
- 质量需求是客观存在的，软件产品也只有服从。
- 只有市场需求是丰富多彩、富于变化的，所以需求的演进与引导都是从用户、客户、产品人员而来的。

笔者从长期的软件工程实践中发现，需求的演进动力，往往不是来自用户的，而是来自产品团队的。原因有几个方面：

- 对现有产品的附加功能
- 技术创新带来的新功能
- 多个产品的融合

所以，需求的引导也一般是由产品团队来完成的。就如同前面的一个故事中讲到的，用户需要快马，福特就制造了汽车。在福特那个年代，养马当然比买车便宜，但是现在养马反而是件奢侈的事情了，养马的需求从快速通行的需要变成了财大气粗的任性。