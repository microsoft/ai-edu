## 14.1 设计原则与实例

### 14.1.1 模块的内聚

功能内聚

信息内聚

通信内聚

过程内聚

逻辑内聚

时间内聚

### 14.1.2 模块的耦合

#### 1. 数据耦合

如果两个模块通过参数交换信息，但是交换的信息仅仅是数据，则成为数据耦合。属于松散耦合。

比如，模块 A 生成了一个文件，把文件的地址告诉模块 B，模块 B 使用该文件做后续处理。常见于技术架构中的管道-过滤器模式。

#### 2. 控制耦合

如果 A 和 B 之间传递的信息中有控制信息，称为控制耦合。它属于中等程度的耦合，增加了系统的复杂程度。

#### 3. 公共环境耦合

两个或多个模块通过一个公共数据环境相互作用时，称为公共环境耦合。又可以分为两种情况：

- A 向环境中写数据，B 从环境中读数据。实际上是数据耦合的一种，属于松散耦合。
- A 和/或 B 既要写数据，也要读数据。实际上是控制耦合的一种，属于紧密耦合。

#### 4. 内容耦合

- A 访问 B 的内部数据。
- A 不通过正常接口而转到 B 的内部逻辑。
- A 和 B 有逻辑、代码重叠（只可能出现在汇编程序中）。
- 一个模块有多个入口（即该模块有多个功能）。

绝对避免使用内容耦合。目前的高级程序设计语言已经不允许有第二种和第三种内容耦合形式了，但是第一种和第四种还需要程序员来避免。

### 14.1.3 六个原则
SOLID
迪米特法则等等


7. 合成复用原则

### 14.1.4 详细设计实例

如果没有概要设计，是无法进行详细设计的。有一个特例是，在已有系统的上的修补，比如新增加一个功能模块，由于对这个系统非常熟悉了，但是又找不到该系统的原始的概要设计，此时可以直接给出该新增模块的详细设计。

在本章后续几小节中，我们将会用一个实例来介绍详细设计的各种关注点。由于该系统没有概要设计，所以我们将采用概要设计+详细设计的混合方式来介绍。

【最佳实践】根据敏捷原则，尽量减少文档数量，只写必要的。所以笔者推荐：
- 当遇到小型系统时，只写稍微概要（粗略）一些的详细设计，而不写概要设计。所谓粗略，就是不必画类和对象图、每个模块的流程图等等。
- 当遇到中型系统时，只写稍微详细（精细）一些的概要设计，而不写详细设计。所谓精细，就是要写一些架构设计方面的内容，也要有一些主要模块的描述，上下兼顾。
- 遇到大系统时，要写架构设计，目的是进行系统分解，然后对于每个子系统按中型系统对待。


在本章中，，最开始的两个小节会复习一下需求分析的内容，以便和后面的系统设计形成完整的上下文。这个实际案例并不复杂，规模偏小，但是却正好可以用于讲解，而且是现代软件工程中常见的 AI 模型落地的应用。

<img src="C:\GitHub\ai-edu\基础教程\A5-现代软件工程（更新中）\第6步 - 设计与实现\第13章 - 概要设计\img\Slide23.SVG"/>


|步骤：|1.描述原始功能|2.提取静态结构|3.捕捉动态行为|4.计划代码结构|5.制定部署方案|
|--|--|--|--|--|--|
|功能分解法|功能|子功能|功能接口|
|结构化分析法|系统关系图，顶层数据流图|数据存储，端点|数据处理，数据流|
|信息建模法|原始信息|对象和属性|关系类型，关联对象|
|面向对象法|功能模型|对象模型|动态模型|
|RUP 4+1 view|Scenario View|逻辑视图|进程视图|开发视图|物理视图|
|图例类型|用例图|静态图|行为图|构件图|部署图|
|UML图例|用例图|类图、对象图|活动图，顺序图，协作图，状态图|组件图|配置图|
|作用|从外部用户的角度描述系统的功能，并指出功能的执行者|初步分析后得出系统中的各个行为主体|从不同侧面描述客户系统的状态和行为|描述软件实现代码的组成|描述软件实现系统的组成和分布状况||
|其它图例|数据流图，鲁棒图|包图，关联图，E-R图，结构图|

