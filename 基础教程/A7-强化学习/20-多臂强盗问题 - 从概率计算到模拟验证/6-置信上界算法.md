## 2.6 置信上界法（UCB）

UCB - Upper Confidence Bound，置信上界。

### 2.6.1 置信度和置信区间

#### 点估计

一个中学有 2000 名学生，体育老师想知道男生女生的平均身高。如果都测量一遍，工作量太大，所以体育老师就只在每个年级中抽测一个班的学生的身高，用于估计全校学生的平均身高。

#### 区间估计

在抽测之前，几个体育老师先给出了自己的“盲猜”。老师甲说：我估计男生的平均身高是 1.75 米，女生是 1.65 米。老师乙说：我估计男生的平均身高在 1.73 米到 1.77 米，女生是 1.62 米到 1.66 米之间。老师丙说：我估计男生在 1 米到 2 米之间，女生也一样......其它老师一阵哄笑......

#### 置信度（置信水平）与置信区间

置信度（confidence coefficient）

- 老师甲的估计数据过于精确，但是不容易正确。
- 老师丙说的虽然是个笑话，但是它的准确程度基本上可以达到 100%。
- 老师乙估计得更“靠谱”一些，也就是说有 95% 的把握是正确的，这个 95% 就是置信度，[1.73,1.77] 以及 [1.62,1.66] 就是置信区间。

#### 计算置信区间

1. 测量一个班的学生的身高，叫做采样，得到样本（每个学生的身高值）。
2. 计算平均值：$\mu=\frac{1}{n} \sum_i h_i$，$h_i$ 表示每个学生的身高，$n$ 是学生数量。
3. 计算标准误差（均方根差）：

### 2.6.2 霍夫丁不等式

$$
\mathbb P \{ \mathbb E [X] > \bar{X_t}+u\} \le e^{-2tu^2}
$$


$$
A_t = \argmax_a \Big [Q_t(a) + c\sqrt{\frac{\ln t}{N_t(a)}} \Big ]
$$

由于操作符是 $\argmax_a$，所以后面的表达式中的 $a$ 都是指的动作集中的每个动作都做一次计算，然后取出最大值。

- $A_t$：最终选出的最佳动作。
- $Q_t(a)$：每个动作的价值估算。
- $c$：参数。
- $\ln t$：$t$ 为迭代次数，求其自然对数值。
- $N_t(a)$：每个动作被选择的次数。


